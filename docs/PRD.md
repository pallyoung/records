# Life Records - 产品需求与开发进度

便于随时查阅的当前功能清单与开发状态。  
**最后更新：** 按代码与文档现状整理。

---

## 1. 项目概述

- **产品名：** Life Records（生活记录）
- **形态：** 前端 SPA（React + Vite + TypeScript）+ Go 后端 API，本地优先，可选云端同步。
- **定位：** 任务与事务记录，支持今日待办、任务管理、数据洞察、个人设置、任务附件与云端同步。

---

## 2. 功能列表与开发进度

### 2.1 前端（app）

| 功能 | 说明 | 状态 |
|------|------|------|
| 首页 | 今日待办、统计卡片、快捷添加入口 | ✅ 已完成 |
| 任务管理 | 按日期分组、搜索筛选、状态管理（待处理/进行中/已完成） | ✅ 已完成 |
| 任务卡片 | 内容、标签、进度条、时间提醒、首图缩略图 | ✅ 已完成 |
| 任务详情/编辑 | 弹窗表单：内容、标签、状态、计划时间、**图片附件** | ✅ 已完成 |
| 快速添加 | 底部表单、#标签 联想、可选计划时间、图片 | ✅ 已完成 |
| 任务附件（图片） | 添加图片（上传）、展示缩略图、同步 attachment_ids | ✅ 已完成 |
| 数据洞察 | 完成率、标签分布、趋势等 | ✅ 已完成 |
| 个人中心 | 主题切换（浅色/深色/自动）、数据统计 | ✅ 已完成 |
| 本地存储 | IndexedDB（Dexie） | ✅ 已完成 |
| 云端同步 | 配置 VITE_API_URL 并登录后 push/pull，含附件 ID 同步 | ✅ 已完成 |
| AI 自然语言 | 快速记录/智能解析（调用后端 /ai/chat） | ❌ 未做（后端已就绪） |

### 2.2 后端（server）

| 功能 | 说明 | 状态 |
|------|------|------|
| 认证 | 注册、登录、刷新令牌、登出 | ✅ 已完成 |
| 任务 CRUD | 创建、查询、更新、软删 | ✅ 已完成 |
| 同步 | push（含 attachment_ids）、pull（含 AttachmentIDs） | ✅ 已完成 |
| 附件 | 预签名上传、完成入库、按 ID 签发下载 URL | ✅ 已完成 |
| 附件与任务关联 | 同步时 link/unlink，pull 返回快照内 AttachmentIDs | ✅ 已完成 |
| OSS | 阿里云 OSS 预签名（配置后启用，否则 mock） | ✅ 已完成 |
| AI | OpenAI 兼容 /ai/chat（配置后启用，否则 mock） | ✅ 已完成 |
| 存储 | 内存 / PostgreSQL（含迁移）、Redis 可选（刷新令牌） | ✅ 已完成 |
| 健康检查 | GET /healthz | ✅ 已完成 |

### 2.3 契约与工程

| 项目 | 说明 | 状态 |
|------|------|------|
| OpenAPI | shared/contracts/openapi.yaml | ✅ 已有 |
| 类型生成 | scripts/generate-types.sh → shared/types/api.ts | ✅ 已有 |
| 数据库表结构 | server/docs/SCHEMA.md | ✅ 已有 |
| 迁移 | server/migrations/（golang-migrate） | ✅ 已有 |

---

## 3. 已取消 / 不再规划

- **日历视图：** 原设计中的「左侧 1/3 月份日历/概览」已取消，不再纳入开发。

---

## 4. 文档索引

- 仓库总览、开发/部署、**环境配置**：根目录 **README.md**
- 前端功能与脚本：**app/README.md**
- 后端结构、迁移、运行：**server/README.md**
- 数据模型与表结构：**server/docs/SCHEMA.md**
- UI 与设计规范（无日历视图）：**docs/design/2026-02-23-lifestyle-records-ui-design.md**
- 本 PRD（功能与进度）：**docs/PRD.md**
